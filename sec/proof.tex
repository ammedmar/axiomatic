% !TEX root = ../axiomatic.tex

\section{Proof}\label{s:proof}

In this section we present the proof of our main theorem: any semi-simplicial \mbox{cup-$i$} construction that is non-zero, irreducible and free is isomorphic to the canonical one.
We divide this proof into several parts.

\subsection{Freeness}\label{ss:freeness_revisited}

\textit{
	Let $\triangle$ be a free semi-simplicial \mbox{cup-$i$} construction.
	If for some $i, n \in \N$ with $i \neq n$ we have
	\[
	(1+T) \triangle_i [n] =
	(1+T) \sum_{\mathclap{\lambda \in \Lambda}} V_\lambda \ot W_\lambda
	\]
	for some indexing set $\Lambda$ with $V_\lambda \ot W_\lambda$ a basis element of $\cP(\simplex^n)^{\ot 2}_{i+n}$ for each $\lambda \in \Lambda$. Then, there is a partition of $\Lambda = \Lambda_1 \sqcup \Lambda_2$ such that
	\[
	\triangle_i [n] =
	\sum_{\lambda_1 \in \Lambda_1} V_{\lambda_1} \ot W_{\lambda_1} \, +
	\sum_{\lambda_2 \in \Lambda_2} W_{\lambda_2} \ot V_{\lambda_2}.
	\]
}

\begin{proof}
	We directly have that our desired conclusion holds up to an element $\kappa$ in the kernel of $(1+T)$.
	This kernel is generated by elements of the form $U \ot U$ and $V \ot W + W \ot V$, so \cref{ss:axioms_revisited} implies that $\kappa = 0$.
\end{proof}

\subsection{The $i \geq n$ case}\label{ss:i_geq_n}

\textit{
	Let $\triangle$ be a free non-zero semi-simplicial \mbox{cup-$i$} construction.
	Then, for every $i, n \in \N$ with $i \geq n$ and $\varepsilon \in \set{0,1}$, we have $\triangle_i[n] = T^\varepsilon\canonical_i[n]$.
}

\begin{proof}
	For $i > n$ all sets $\P_{n-i}^n$ are empty which proves the claim.
	For $i = n$ the only non-zero element in the vector space $\cP(\simplex^n)^{\ot 2}_{2n}$ is $\emptyset \ot \emptyset$, and $\canonical_n[n] = \emptyset \ot \emptyset$.
	Let us proceed using an argument by contradiction to show that $\triangle_n[n] \neq 0$ for all $n \in \N$.
	Let $n_0 \in \N$ be the smallest integer satisfying $\triangle_{n_0}[n_0] = 0$.
	If $n_0 > 0$ then
	\begin{align*}
	(1+T) \triangle_{n_0-1} [n_0] =
	\bd \triangle_{n_0} [n_0] + \triangle_{n_0} \bd \, [n_0] = 0,
	\end{align*}
	which, by \cref{ss:freeness_revisited}, implies $\triangle_{n_0-1}[n_0] = 0$.
	From this and $\triangle_{n_0-1}[n_0-1] = \emptyset \ot \emptyset$ we obtain
	\[
	(1+T)\triangle_{n_0-2}[n_0] =
	\bd \triangle_{n_0-1}[n_0] + \triangle_{n_0-1} \bd \, [n_0] =
	\sum_{u = 0}^{n_0} \{u\} \ot \{u\},
	\]
	which is a contradiction since $\sum_u \{u\} \ot \{u\}$ is not in the image of $(1+T)$.

	The previous argument shows that $\triangle_n [n] = 0$ for every $n \in \N$.
	This serves as the base case of an induction argument over $n-i$ that will prove $\triangle_i [n] = 0$ for every $i, n \in \N$, i.e., that $\triangle$ is the zero \mbox{cup-$i$} construction.
	For the induction step, consider
	\begin{align*}
	(1+T) \triangle_{i-1} [n] =
	\bd \triangle_{i} [n] + \triangle_{i} \bd\, [n] = 0,
	\end{align*}
	which, by \cref{ss:freeness_revisited}, implies $\triangle_{i-1} [n] = 0$.
\end{proof}

\subsection{Irreducible and partition chains}

A basis element $V \ot W \in \cP(\simplex^n)^{\ot 2}$ is said to be \textit{irreducible} if $V \cap W = \emptyset$ and \textit{reducible} otherwise.
For any $U \subseteq \set{0,\dots,n}$ we define its \textit{partition chain} $\zeta_U$ as the sum of all basis elements $V \ot W$ in $\cP(\simplex^n)^{\ot 2}$ with $V \union W = U$ and $V \cap W = \emptyset$.

Let $\pired,\pi^\perp_{\text{red}} \colon \cP(\simplex^n)^{\ot 2} \to \cP(\simplex^n)^{\ot 2}$ be the projections to the subspaces generated by reducible and irreducible basis elements respectively.
Explicitly,
\begin{align*}
	\pired(V \ot W) =&
	\begin{cases}
		V \ot W, & \text{if $V \ot W$ is reducible},\\
		\hfil 0, & \text{if not}.
	\end{cases} \\
	\pi^\perp_{\text{red}}(V \ot W) =&
	\begin{cases}
		V \ot W, & \text{if $V \ot W$ is irreducible},\\
		\hfil 0, & \text{if not}.
	\end{cases}
\end{align*}

We remark that a cup-$i$ construction $\triangle$ is irreducible if and only if $\pired\triangle_i[n] = 0$ for all $i,n \in \N$.

Partition chains are irreducible by definition.
Additionally, as we will see in the next lemma, the boundary of a partition chain is also irreducible and, in fact, this property completely characterizes partition chains among irreducible ones.

\begin{lemma}\label{l:partition chains}
	An irreducible chain $\zeta$ satisfies $(\pired \circ \bd)\zeta = 0$ if and only if $\zeta$ is a sum of partition chains.
	Furthermore, if $\zeta_U$ is a partition chain then
	\begin{equation}\label{eq:boundary_partition_chain}
		\bd \zeta_U = \sum_{\bar u \notin U} \zeta_{\bar u.U}.
	\end{equation}
\end{lemma}

\begin{proof}
	Let $\Lambda$ be the set of distinct basis elements $V \ot W$ with $\zeta = \sum_\Lambda V \ot W$, then
	\[
	\bd \zeta =
	\sum_{\Lambda} \!\Big(\sum_{w \in W} w.V \ot W \ + \
	\sum_{v \in V} V \ot v.W \ + \
	\sum_{\mathclap{\bar u \notin V \union W}} \bar u.V \ot W + V \ot \bar u.W\Big).
	\]
	We then have
	\begin{align}
		\label{eq:non_perp}
		\pired(\bd \zeta) &=
		\sum_{\Lambda} \!\Big(\sum_{w \in W} w.V \ot W \ + \
		\sum_{v \in V} V \ot v.W\Big), \\
		\label{eq:perp}
		\pi^\perp_{\text{red}}(\bd \zeta) &=
		\sum_{\Lambda} \sum_{\quad\mathclap{\bar u \notin V \union W}} \bar u.V \ot W + V \ot \bar u.W.
	\end{align}
	The chain $\zeta$ is the partition chain of some $U$ if, by definition, $\Lambda$ contains all basis elements $V \ot W$ with $V \union W = U$ and $V \cap W = \emptyset$.
	In this case, \cref{eq:perp}, reads
	\[
	\pi^\perp_{\text{red}}(\bd \zeta) =
	\sum_{\Lambda} \sum_{\mathclap{\bar u \notin U}} \bar u.V \ot W + V \ot \bar u.W =
	\sum_{\quad\mathclap{\bar u \notin U}} \zeta_{\bar u.U}.
	\]
	This will then imply \cref{eq:boundary_partition_chain} after we show that $\zeta$ is in the kernel of $(\pired \circ \bd)$ when $\zeta = \zeta_U$.

	Let us now prove that the chain $\zeta$ satisfies $(\pired \circ \bd)\zeta = 0$ if and only if $\zeta$ is a sum of partition chains.
	Since for any two summands in \cref{eq:non_perp} we have
	\begin{align*}
		w.V \ot W = w'.V' \ot W' &\iff w = w', \ V = V', \ W = W', \\
		V \ot v.W = V' \ot v'.W' &\iff v = v', \ V = V', \ W = W',
	\end{align*}
	the sum of the elements in the following sets
	\begin{align*}
		L &= \set[\Big]{w.V \ot W \mid V \ot W \in \Lambda, \ w \in W}, \\
		R &= \set[\Big]{V \ot v.W \mid V \ot W \in \Lambda, \ v \in V},
	\end{align*}
	is equal to $(\pired \circ \bd) \zeta$.
	Therefore, $(\pired \circ \bd) \zeta = 0$ if and only $L = R$.
	Notice that for elements in $L$ and $R$ we have
	\begin{align*}
		w.V \ot W = V' \ot v'.W' &\iff v' = w, \ V' = w.V, \ W' = W \setminus w, \\
		V \ot v.W = w'.V' \ot W' &\iff w' = v, \ V' = V \setminus v, \ W' = v.W.
	\end{align*}

	These relations motivate the following notion.
	A \textit{basic move} on a partition $(V,W)$ removes an element from one of the factors and adds it to the other.
	Clearly, any two partitions of the same set are related by a sequence of basic moves.
	Therefore, $L = R$ if and only if for all $V \ot W \in \Lambda$ and any partition of $(V',W')$ obtained from $(V,W)$ via a basic move we have $V' \ot W' \in \Lambda$.
	In other words, $L = R$ if and only if $\zeta$ is a sum of partition chains.
\end{proof}

\subsection{The $i = n-1$ case}\label{ss:i_equals_n_minus_1}

\textit{
	Let $\triangle$ be a semi-simplicial cup-$i$ construction which is non-zero, irreducible, and free.
	Then, for each $n \in \N$, there is $\varepsilon_n \in \set{0,1}$ such that
	\[
	\triangle_{n-1} [n] = T^{\varepsilon_n} \canonical_{n-1} [n].
	\]
}

\begin{proof}
	\anibal{This proof doesn't use freeness}
	We will proceed by induction on $n$.
	For $n = 0$, we have that $\triangle_{-1}[0] = 0$ which trivially agrees with both $\canonical_{-1}[0]$ and $T\canonical_{-1}[0]$.
	Using the $i \geq n$ case (\cref{ss:i_geq_n}) we have
	\begin{align*}
		(1+T)\triangle_{n-1}[n] &=
		\bd\triangle_n[n] + \triangle_n\bd[n] \\ &=
		\sum_{u=0}^n \set{u} \ot \emptyset + \emptyset \ot \set{u} \\ &=
		(1+T)\sum_{U \in \P_1^n} U^0 \ot U^1.
	\end{align*}
	By \cref{ss:freeness_revisited}, \anibal{Notice that this doesn't use freeness since there are not many elements in $\ker(1+T)$ in this dimension} there is function $\xi \colon \P_1^n \to \set{0,1}$ such that
	\begin{equation}\label{eq:triangle_n-1_n}
		\triangle_{n-1}[n] = \sum_{U \in \P_1^n} U^\xi \ot U^\barxi
	\end{equation}
	and we must show that either $\xi \equiv 0$ or $\xi \equiv 1$.
	Let us rewrite \cref{eq:triangle_n-1_n} as
	\begin{align*}
		\triangle_{n-1}[n] &=
		\canonical_{n-1}[n] \ + \ \sum_{\mathclap{\substack{\set{u} \in \P_1^n \\ \xi \set{u} \neq 0}}} \set{u} \ot \emptyset + \emptyset \ot \set{u} \\ &=
		\canonical_{n-1}[n] \ + \ \sum_{\mathclap{\substack{\set{u} \in \P_1^n \\ \xi \set{u} \neq 0}}} \zeta_{\set{u}}
	\end{align*}
	where $\zeta_{\set{u}}$ is the partition chain of the singleton $\set{u}$.
	By \cref{ss:i_geq_n}, we have $\triangle_{n-1}\bd[n] = \canonical_{n-1}\bd[n]$.
	Then, using \cref{l:partition chains} and simplifying the indexing set of the sum, we have
	\begin{align*}
		(1+T) \triangle_{n-2}[n] &=
		\bd\triangle_{n-1}[n] + \triangle_{n-1}\bd[n] \\ &=
		(1+T) \canonical_{n-2}[n] \ + \
		\sum_{\mathclap{\substack{\set{u} \in \P_1^n \\ \xi \set{u} \neq 0}}} \ \bd\zeta_{\set{u}} \\ &=
		(1+T)\sum_{V \in \P_2^n} V^0 \ot V^1 \ + \
		\sum_{\mathclap{\substack{\set{u} \in \P_1^n \\ \xi \set{u} \neq 0}}} \
		\sum_{\ \bar{u} \neq u} \zeta_{\bar{u}.\set{u}}.
	\end{align*}
	By \cref{ss:freeness_revisited}, there exist a function $\eta \colon \P^n_2 \to \set{0,1}$ and elements $\zeta^{1/2}_{\bar{u}.\set{u}}$ satisfying
	\[
	(1+T)\zeta^{1/2}_{\bar{u}.\set{u}} = \zeta_{\bar{u}.\set{u}}
	\]
	such that
	\[
	\triangle_{n-2}[n] =
	\sum_{V \in \P_{2}^n} V^\eta \ot V^\bareta \ + \
	\sum_{\mathclap{\substack{\set{u} \in \P_1^n \\ \xi \set{u} \neq 0}}} \
	\sum_{\ \bar{u} \neq u} \zeta^{1/2}_{\bar{u}.\set{u}}
	\]
	or, equivalently,
	\[
	\triangle_{n-2}[n] =
	\canonical_{n-2}[n] \ + \
	(1+T)\sum_{\mathclap{\substack{V \in \P_2^n \\ \eta(V) \neq 0}}} V^0 \ot V^1 \ + \
	\sum_{\mathclap{\substack{\set{u} \in \P_1^n \\ \xi \set{u} \neq 0}}} \
	\sum_{\ \bar{u} \neq u} \zeta^{1/2}_{\bar{u}.\set{u}}
	\]
	The induction hypothesis states that
	\[
	\triangle_{n-2} \bd[n] = T^\varepsilon \canonical_{n-2} \bd[n]
	\]
	for some $\varepsilon \in \set{0,1}$.
	Let us assume $\varepsilon = 0$ and remark that $\varepsilon = 1$ is approached similarly.
	Therefore,
	\begin{align*}
		(1+T)\triangle_{n-3}[n] &=
		\bd\triangle_{n-2}[n] + \triangle_{n-2}\bd[n] \\ &=
		(1+T)\canonical_{n-3}[n] \ + \
		(1+T)\bd\sum_{\mathclap{\substack{V \in \P_2^n \\ \eta(V) \neq 0}}} V^0 \ot V^1 \ + \
		\bd\sum_{\mathclap{\substack{\set{u} \in \P_1^n \\ \xi \set{u} \neq 0}}} \
		\sum_{\ \bar{u} \neq u} \zeta^{1/2}_{\bar{u}.\set{u}}.
	\end{align*}
	Since $(1+T)\triangle_{n-3}[n]$ and $(1+T)\canonical_{n-3}[n]$ are in the kernel of $\pired$, we have that
	\[
	\zeta = (1+T)\sum_{\mathclap{\substack{V \in \P_2^n \\ \eta(V) \neq 0}}} V^0 \ot V^1 \ + \
	\sum_{\mathclap{\substack{\set{u} \in \P_1^n \\ \xi \set{u} \neq 0}}} \
	\sum_{\ \bar{u} \neq u} \zeta^{1/2}_{\bar{u}.\set{u}}
	\]
	is in the kernel of $(\pired \circ \bd)$.
	So, by \cref{l:partition chains}, $\zeta$ is a sum of partition chains.
%	\[
%	(1+T)\sum_{\mathclap{\substack{V \in \P_2^n \\ \eta(V) \neq 0}}} V^0 \ot V^1 \ + \
%	\sum_{\mathclap{\substack{u \in U \\ \bar{u} \notin \set{u}}}} \zeta^{1/2}_{\bar{u}.\set{u}} \ = \
%	\zeta
%	\]
%	for $\zeta$ a sum of partition chains.
	Since $(1+T) \zeta = 0$, we have
	\[
	0 = (1+T)\sum_{\mathclap{\substack{\set{u} \in \P_1^n \\ \xi \set{u} \neq 0}}} \
	\sum_{\ \bar{u} \neq u} \zeta^{1/2}_{\bar{u}.\set{u}} =
	\sum_{\mathclap{\substack{\set{u} \in \P_1^n \\ \xi \set{u} \neq 0}}} \
	\sum_{\ \bar{u} \neq u} \zeta_{\bar{u}.\set{u}} =
	\bd \sum_{\mathclap{\substack{\set{u} \in \P_1^n \\ \xi \set{u} \neq 0}}} \ \zeta_{\set{u}}.
	\]
	We now show that the identity
	\begin{equation}\label{eq:bd_triangle}
		\bd\sum_{\mathclap{\substack{\set{u} \in \P_1^n \\ \xi \set{u} \neq 0}}} \ \zeta_{\set{u}} = 0
	\end{equation}
	implies either $\xi \equiv 0$ or $\xi \equiv 1$.
	Arguing by contradiction, let us assume the existence of $u$ and $\bar{u}$ with $\xi\set{u} = 1$
	and $\xi\set{\bar u} = 0$.
	Then, the basis element $u_0 \ot \bar u_0$ appears as a summand in \cref{eq:bd_triangle}, a contradiction.
	Therefore, either $\triangle_{n-1}[n] = \canonical_{n-1}[n]$ or $\triangle_{n-1}[n] = T\canonical_{n-1}[n]$.
\end{proof}

\subsection{Proof of main theorem}\label{ss:proof}

Let $\triangle = \set[\big]{\triangle_i [n]}_{i,n\in\N}$ be a semi-simplicial \mbox{cup-$i$} construction which is non-zero, irreducible, and free.
As usual, we denote the canonical \mbox{cup-$i$} construction by $\canonical$.
We need to show that:
\begin{center}
	($\ast$) For any fixed $i$ either $\triangle_i [n] = \canonical_ i [n]$ or $\triangle_i [n] = T\canonical_ i [n]$ hold for every $n$.
\end{center}
We will use an induction argument over $k = n-i$ to show this.
For $k \leq 0$ both $\triangle_i [n] = \canonical_ i [n]$ or $\triangle_i [n] = T\canonical_ i [n]$ hold for every $n$ by \cref{ss:i_geq_n}.
The case $k = 1$, treated in \cref{ss:i_equals_n_minus_1}, determines for any $i$ if $\triangle_i$ will be equal to $\canonical_i$ or $T\canonical_i$.
Let us assume that our claim holds for all $i,n \in \N$ with $n-i < k$ and $k > 1$.
Therefore, for any $i,n \in \N$ with $n-i = k$, we have
\begin{align*}
	(1+T)\triangle_i[n] &=
	\bd\triangle_{i+1}[n] + \triangle_{i+1}\bd[n] \\ &=
	(1+T)\,\canonical_i[n] \\ &=
	(1+T)\sum_{\mathclap{\quad U \in \P_{n-i}^n}} \, U^0 \ot U^1.
\end{align*}
\cref{ss:freeness_revisited} implies the existence of a function $\xi \colon \P_{n-i}^n \to \set{0,1}$ with
\begin{equation}\label{eq:triangle_i_n}
	\triangle_i[n] = \sum_{\mathclap{\quad U \in \P_{n-i}^n}} \, U^{\xi} \ot U^{\barxi}.
\end{equation}
By the induction hypothesis $\triangle_i[n-1] = T^\varepsilon\canonical_i[n-1]$ for some $\varepsilon \in \set{0,1}$.
Let us assume $\varepsilon = 0$ and state that we need to show that $\xi \equiv 0$.
The case $\varepsilon = 1$ is approached similarly.
Let us rewrite \cref{eq:triangle_i_n} as
\[
\triangle_i[n] = \canonical_i[n] \ +\
(1+T) \sum_{\quad\mathclap{\substack{U \in \P_{n-i}^n \\ \xi(U) \neq 0}}} U^0 \ot U^1.
\]
%Using the induction hypothesis $\triangle_{i-1}\bd[n] = T^\varepsilon \canonical_{i-1}\bd[n]$ for some $\varepsilon \in \set{0,1}$.
%Let us assume $\varepsilon = 0$ and remark that the case $\varepsilon = 1$ is approached similarly.
Then
\begin{equation}\label{eq:main proof a}
	\begin{split}
		(1+T)\triangle_{i-1}[n] &=
		\bd \triangle_{i}[n] \ +\ \triangle_{i}\bd[n] \\ &=
		\bd \canonical_{i}[n] \ + \
		\bd\Big((1+T)\sum_{\quad\mathclap{\substack{U \in \P_{n-i}^n \\ \xi(U) \neq 0}}} U^0 \ot U^1\Big)
		\ +\ \canonical_{i}\bd[n] \\ &=
		(1+T)\canonical_{i-1}[n] \ +\
		\bd\Big((1+T)\sum_{\quad\mathclap{\substack{U \in \P_{n-i}^n \\ \xi(U) \neq 0}}} U^0 \ot U^1\Big).
	\end{split}
\end{equation}
Since $(1+T)\triangle_{i-1}[n]$ and $(1+T)\canonical_{i-1}[n]$ are in the kernel of $\pired$, we have that the irreducible chain
\[
(1+T)\sum_{\quad\mathclap{\substack{U \in \P_{n-i}^n \\ \xi(U) \neq 0}}} U^0 \ot U^1
\]
is in the kernel of $(\pired \circ \bd)$ so, by \cref{l:partition chains}, it is a sum of partition chains.
This is a contradiction unless $\xi \equiv 0$, since the number of partitions of a set $U$ with more than one element is strictly greater than $2$ and $n-i = k > 1$.